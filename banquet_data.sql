DROP TABLE REGISTRATION;
DROP TABLE ATTENDEE;
DROP TABLE MEAL;
DROP TABLE BANQUET;

CREATE TABLE BANQUET (
    BIN NUMBER(4) PRIMARY KEY,
    BANQUETNAME VARCHAR(100) NOT NULL,
    DATETIME TIMESTAMP NOT NULL,
    ADDRESS VARCHAR(100) NOT NULL,
    LOCATION VARCHAR(100) NOT NULL,
    CONTACTFN VARCHAR(30) NOT NULL,
    CONTACTLN VARCHAR(30) NOT NULL,
    AVAILABLE CHAR(1) CHECK (AVAILABLE IN ('Y','N')),
    QUOTA INTEGER NOT NULL,
    MAXQUOTA INTEGER
);

INSERT INTO BANQUET (BIN, BANQUETNAME, DATETIME, ADDRESS, LOCATION, CONTACTFN, CONTACTLN, AVAILABLE, QUOTA, MAXQUOTA) VALUES
(1001, 'Annual Gala', TO_TIMESTAMP('2023-12-01 19:00:00', 'YYYY-MM-DD HH24:MI:SS'), '123 Main St', 'Ballroom A', 'John', 'Doe', 'Y', 199,200);

INSERT INTO BANQUET (BIN, BANQUETNAME, DATETIME, ADDRESS, LOCATION, CONTACTFN, CONTACTLN, AVAILABLE, QUOTA, MAXQUOTA) VALUES
(1002, 'Charity Dinner', TO_TIMESTAMP('2023-12-10 18:30:00', 'YYYY-MM-DD HH24:MI:SS'), '456 Elm St', 'Hall B', 'Jane', 'Smith', 'Y', 149,150);

INSERT INTO BANQUET (BIN, BANQUETNAME, DATETIME, ADDRESS, LOCATION, CONTACTFN, CONTACTLN, AVAILABLE, QUOTA, MAXQUOTA) VALUES
(1003, 'New Year Celebration', TO_TIMESTAMP('2024-01-05 20:00:00', 'YYYY-MM-DD HH24:MI:SS'), '789 Pine St', 'Roof Top', 'Emily', 'Johnson', 'N', 99,100);

INSERT INTO BANQUET (BIN, BANQUETNAME, DATETIME, ADDRESS, LOCATION, CONTACTFN, CONTACTLN, AVAILABLE, QUOTA, MAXQUOTA) VALUES
(1004, 'Spring Festival', TO_TIMESTAMP('2024-03-15 17:00:00', 'YYYY-MM-DD HH24:MI:SS'), '321 Maple Ave', 'Garden Area', 'Michael', 'Brown', 'Y', 249,250);

INSERT INTO BANQUET (BIN, BANQUETNAME, DATETIME, ADDRESS, LOCATION, CONTACTFN, CONTACTLN, AVAILABLE, QUOTA, MAXQUOTA) VALUES
(1005, 'Corporate Retreat', TO_TIMESTAMP('2024-04-20 12:00:00', 'YYYY-MM-DD HH24:MI:SS'), '654 Oak Rd', 'Conference Room', 'Sarah', 'Davis', 'Y', 99,100);

CREATE TABLE MEAL (
    BIN NUMBER(4) NOT NULL,
    DISHNAME VARCHAR(100) NOT NULL,
    PRICE INTEGER NOT NULL,
    TYPE VARCHAR(50) NOT NULL,
    SPECIALCUISINE VARCHAR(100),
    PRIMARY KEY (BIN, DISHNAME),
    CONSTRAINT mealbin FOREIGN KEY (BIN) REFERENCES BANQUET(BIN) ENABLE
);

INSERT INTO MEAL (BIN, DISHNAME, PRICE, TYPE, SPECIALCUISINE) VALUES
(1001, 'Pasta Primavera', 50, 'Dinner', 'Italian');
INSERT INTO MEAL (BIN, DISHNAME, PRICE, TYPE, SPECIALCUISINE) VALUES
(1001, 'Tiramisu', 10, 'Dessert', 'Italian');
INSERT INTO MEAL (BIN, DISHNAME, PRICE, TYPE, SPECIALCUISINE) VALUES
(1002, 'Sweet and Sour Pork', 40, 'Dinner', 'Chinese');
INSERT INTO MEAL (BIN, DISHNAME, PRICE, TYPE, SPECIALCUISINE) VALUES
(1002, 'Steamed Dumplings', 15, 'Appetizer', 'Chinese');
INSERT INTO MEAL (BIN, DISHNAME, PRICE, TYPE, SPECIALCUISINE) VALUES
(1003, 'Grilled Salmon', 60, 'Buffet', 'International');
INSERT INTO MEAL (BIN, DISHNAME, PRICE, TYPE, SPECIALCUISINE) VALUES
(1003, 'Vegetable Stir-Fry', 25, 'Buffet', 'International');
INSERT INTO MEAL (BIN, DISHNAME, PRICE, TYPE, SPECIALCUISINE) VALUES
(1004, 'Quinoa Salad', 45, 'Lunch', 'Vegetarian');
INSERT INTO MEAL (BIN, DISHNAME, PRICE, TYPE, SPECIALCUISINE) VALUES
(1004, 'Stuffed Peppers', 30, 'Lunch', 'Vegetarian');
INSERT INTO MEAL (BIN, DISHNAME, PRICE, TYPE, SPECIALCUISINE) VALUES
(1005, 'Croissant', 5, 'Brunch', 'Continental');
INSERT INTO MEAL (BIN, DISHNAME, PRICE, TYPE, SPECIALCUISINE) VALUES
(1005, 'Eggs Benedict', 20, 'Brunch', 'Continental');

CREATE TABLE ATTENDEE (
    EMAIL VARCHAR(255) CHECK (EMAIL LIKE '%@%') PRIMARY KEY,
    FNAME VARCHAR(255) NOT NULL,
    LNAME VARCHAR(255) NOT NULL,
    ADDRESS VARCHAR(255) NOT NULL,
    ATTENDEETYPE VARCHAR(255) NOT NULL CHECK (ATTENDEETYPE IN ('staff', 'student', 'alumni', 'guest')),
    PASSWORD VARCHAR(30) NOT NULL,
    PHONENO VARCHAR(8) NOT NULL,
    ORGANIZATION CHAR(6) CHECK (ORGANIZATION IN ('PolyU', 'SPEED', 'HKCC', 'Others'))
);

INSERT INTO ATTENDEE (EMAIL, FNAME, LNAME, ADDRESS, ATTENDEETYPE, PASSWORD, PHONENO, ORGANIZATION) VALUES
('john.doe@example.com', 'John', 'Doe', '123 Main St, City', 'staff', 'password123', 12345678, 'PolyU');
INSERT INTO ATTENDEE (EMAIL, FNAME, LNAME, ADDRESS, ATTENDEETYPE, PASSWORD, PHONENO, ORGANIZATION) VALUES
('jane.smith@example.com', 'Jane', 'Smith', '456 Elm St, City', 'student', 'mypassword', 23456789, 'SPEED');
INSERT INTO ATTENDEE (EMAIL, FNAME, LNAME, ADDRESS, ATTENDEETYPE, PASSWORD, PHONENO, ORGANIZATION) VALUES
('emily.johnson@example.com', 'Emily', 'Johnson', '789 Pine St, City', 'alumni', 'securepass', 34567890, 'HKCC');
INSERT INTO ATTENDEE (EMAIL, FNAME, LNAME, ADDRESS, ATTENDEETYPE, PASSWORD, PHONENO, ORGANIZATION) VALUES
('michael.brown@example.com', 'Michael', 'Brown', '321 Maple Ave, City', 'guest', 'guestpass', 45678901, 'Others');
INSERT INTO ATTENDEE (EMAIL, FNAME, LNAME, ADDRESS, ATTENDEETYPE, PASSWORD, PHONENO, ORGANIZATION) VALUES
('sarah.davis@example.com', 'Sarah', 'Davis', '654 Oak Rd, City', 'staff', 'staffpass', 56789012, 'PolyU');

CREATE TABLE REGISTRATION (
    BIN NUMBER(4) NOT NULL,
    EMAIL VARCHAR(255) CHECK (EMAIL LIKE '%@%'),
    REMARKS VARCHAR(255),
    DRINKCHOICE VARCHAR(100),
    MEALCHOICE VARCHAR(100),
    REGISTRATION_TIME TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    SEATNUM INTEGER,
    PRIMARY KEY(BIN, EMAIL),
    CONSTRAINT regbin FOREIGN KEY (BIN) REFERENCES BANQUET(BIN) ENABLE,
    CONSTRAINT regemail FOREIGN KEY (EMAIL) REFERENCES ATTENDEE(EMAIL) ENABLE
);

INSERT INTO REGISTRATION (BIN, EMAIL, REMARKS, DRINKCHOICE, MEALCHOICE, SEATNUM) VALUES
(1001, 'john.doe@example.com', 'Looking forward to it!', 'Red Wine', 'Pasta Primavera', 1);
INSERT INTO REGISTRATION (BIN, EMAIL, REMARKS, DRINKCHOICE, MEALCHOICE, SEATNUM) VALUES
(1002, 'jane.smith@example.com', 'Can I have a vegetarian option?', 'Soft Drink', 'Sweet and Sour Pork', 1);
INSERT INTO REGISTRATION (BIN, EMAIL, REMARKS, DRINKCHOICE, MEALCHOICE, SEATNUM) VALUES
(1003, 'emily.johnson@example.com', 'Excited for the buffet!', 'Water', 'Grilled Salmon', 1);
INSERT INTO REGISTRATION (BIN, EMAIL, REMARKS, DRINKCHOICE, MEALCHOICE, SEATNUM) VALUES
(1004, 'michael.brown@example.com', 'First time attending.', 'Beer', 'Quinoa Salad', 1);
INSERT INTO REGISTRATION (BIN, EMAIL, REMARKS, DRINKCHOICE, MEALCHOICE, SEATNUM) VALUES
(1005, 'sarah.davis@example.com', 'Allergic to nuts.', 'Juice', 'Croissant', 1);

COMMIT;